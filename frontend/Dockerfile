# ───────────────────────────────────────
# 1. ベースイメージ（Node.js 23）
# ───────────────────────────────────────
FROM node:23

WORKDIR /app

# ───────────────────────────────────────
# 2. 依存パッケージを先にインストール（キャッシュ活用）
# ───────────────────────────────────────
COPY package.json package-lock.json ./
RUN npm install

# ───────────────────────────────────────
# 3. 残りのソースコードをコピー
# ───────────────────────────────────────
COPY . .

# ───────────────────────────────────────
# 4. ポート宣言
# ───────────────────────────────────────
EXPOSE 3000

# ───────────────────────────────────────
# 5. 開発サーバー起動コマンド
# ───────────────────────────────────────
CMD ["npm", "run", "dev"]
